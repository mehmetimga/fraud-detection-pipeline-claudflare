# Fraud Detection Pipeline Configuration

[nats]
url = "nats://localhost:4222"
transaction_subject = "transactions"
alert_subject = "fraud.alerts"

[models]
# Path to ONNX models directory
models_dir = "models"

# Inference strategy:
# - "primary": Use single best model (XGBoost) - fast, recommended for most cases
# - "ensemble": Use all models with weighted average - maximum accuracy for high-stakes
strategy = "ensemble"

# Primary model for single-model strategy (used when strategy = "primary")
# Based on R analysis: XGBoost achieved best ROC-AUC (0.787)
primary_model = "xgboost"

# Number of threads for ONNX inference per model
# 1 = single-threaded (default, fastest for small models)
# 2+ = multi-threaded (can help with larger models)
onnx_threads = 1

# Model weights for ensemble scoring (used when strategy = "ensemble")
[models.weights]
xgboost = 0.30        # Best ROC-AUC
catboost = 0.28       # Second best
lightgbm = 0.25       # Third
random_forest = 0.17  # Fourth

# Optimal thresholds per model (from R analysis)
[models.thresholds]
xgboost = 0.61
catboost = 0.57
lightgbm = 0.60
random_forest = 0.33
ensemble = 0.56

[detection]
# Risk score threshold (0.0 - 1.0)
# Set to XGBoost optimal threshold from R analysis
threshold = 0.56

# Risk level thresholds
[detection.risk_levels]
low = 0.3
medium = 0.5
high = 0.7
critical = 0.9

[pipeline]
# Number of worker threads
workers = 6

# Batch size for inference (if batch processing enabled)
batch_size = 32

# Processing timeout in milliseconds
timeout_ms = 1000

[logging]
level = "info"
format = "json"

